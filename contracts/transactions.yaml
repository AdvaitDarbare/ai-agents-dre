
dataContractSpecification: 3.1.0
id: urn:datacontract:transactions
info:
  title: Transactions Data Contract
  version: 1.0.0
  description: Contract for the daily transactions dataset.
  owner: data-engineering

schema:
  - name: transactions
    physicalType: table
    description: Daily transaction records.
    properties:
      - name: transaction_id
        physicalType: int64
        required: true
        primaryKey: true
        description: Unique identifier.
        quality:
          - metric: unique
            mustBe: true
            severity: critical

      - name: amount
        physicalType: float64
        required: true
        description: Transaction amount.
        quality:
          - metric: minValue
            mustBe: 0.01
            severity: critical
          - metric: nullValues
            mustBe: 0
            severity: critical

      - name: timestamp
        physicalType: string
        required: true
        description: ISO8601 timestamp.
        quality:
          - metric: nullValues
            mustBe: 0
            severity: critical

      - name: user_id
        physicalType: int64
        required: false
        quality:
          - metric: nullValues
            mustBe: 10%
            severity: warning

      - name: user_comment
        physicalType: string
        required: false
        quality:
          - metric: nullValues
            mustBe: 50%
            severity: warning

      - name: category
        physicalType: string
        required: false
        quality:
          - metric: nullValues
            mustBe: 5%
            severity: warning

    # Table-Level Quality Rules
    quality:
      - metric: freshness
        threshold: 24h
        severity: critical
